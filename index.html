<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Get-my-a-gym by latibbean</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">


<link href="css/style.css" rel='stylesheet' type='text/css' />


<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/jquery.swipebox/1.4.1/css/swipebox.min.css">
<!--link rel="stylesheet" href="css/swipebox.css"-->

<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"
	rel='stylesheet' type='text/css' />
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>


<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
<!--link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" /-->

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
<!--script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script-->


<!---- start-smoth-scrolling---->
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<style>
.gmnoprint img {
	max-width: none;
}

.panel:hover {
	background-color: rgb(237, 245, 252);
}

.map {
	min-width: 300px;
	min-height: 470px;
	width: 100%;
	height: 100%;
}

img {
	max-width: 110%;
	height: auto;
}

.clearfix {
	clear: both;
}

.rowcolor {
	background-color: #CCCCCC;
}

.padall {
	padding: 10px;
}

.padbig {
	padding: 20px;
}

.icon {
	font-size: 23px;
	color: #197BB5;
}
</style>

<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />

  </head>
  <body>

      <header>
        <h1>Get-my-a-gym</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/latibbean/get-my-a-gym" class="button fork"><strong>About London Volleyball</strong></a>
        <div class="downloads">
          <!--span>Downloads:</span-->
          <ul>
            <!--li><a href="https://github.com/latibbean/get-my-a-gym/zipball/master" class="button">ZIP</a></li-->
            <!--li><a href="https://github.com/latibbean/get-my-a-gym/tarball/master" class="button">TAR</a></li-->
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        
<div class="container" id="gym" style="max-height: 800px">

<div class="row padbig">

<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
<div class="row">
<div id="map" class="map" style="min-height: 600px"></div>
</div>
</div>
<div style="text-align: center">
<div class="panel panel-primary" style="display: inline-table">
<div class="panel-heading">
<h3 class="panel-title">Filter by Court type</h3>
</div>
<div class="panel-body"><label class="checkbox-inline"> <input
	type="checkbox" id="rdIndoor" value="option1" checked> Indoor </label>
<label class="checkbox-inline"> <input type="checkbox"
	id="rdBeach" value="option2" checked> Beach </label>
<div class="btn-group padbig" data-toggle="buttons">
<button type="button" id="resetButton" data-loading-text="Loading..."
	class="btn btn-primary" autocomplete="off">Apply filter and
reset Map</button>
</div>
</div>
</div>
</div>

<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 "
	style="overflow: scroll; max-height: 450px" id="ListOfGyms"></div>

</div>
</div>

<script>

    $('#resetButton').click(function () {

        console.log('reset map zoom');
        var latLondon  = 51.5286416;
        var lngLondon  = -0.1015987;
//console.log(
        map.setView((new L.LatLng(latLondon, lngLondon)), 10);
        //console.log($(this));
        //$(this).button('loading');


		resetMap();
    });


	$('.btn-filter').click(function () {
		$(this).toggleClass('active-checked'); 
        console.log('reset class filter');

        
        console.log('Beach checked: ' + $('#rdBeach').prop('checked'));
        console.log('Indoor checked: ' + $('#rdIndoor').prop('checked'));
        
        console.log('Beach active-checked: ' + $('#rdBeach').parent().hasClass('active-checked'));
        console.log('Indoor active-checked: ' + $('#rdIndoor').parent().hasClass('active-checked'));
        
		resetMap();

	  });
        
    </script>


<script src="https://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
	var latLondon = 51.5286416;
	var lngLondon = -0.1015987;
	var myLondonLocation = new google.maps.LatLng(latLondon, lngLondon);

	var map = L.map('map').setView( [ latLondon, lngLondon ], 10);
	var volleyIcon = L.icon( {
		//            iconUrl: 'images/marker1.png',
		iconUrl : 'images/indoorvb2.png',
		//shadowUrl: 'leaf-shadow.png',
		//iconSize:     [38, 95], // size of the icon
		//shadowSize:   [50, 64], // size of the shadow
		//iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
		//shadowAnchor: [4, 62],  // the same for the shadow
		popupAnchor : [ 10, -5 ]
	// point from which the popup should open relative to the iconAnchor
			});

	var volleyBeachIcon = L.icon( {
		//          iconUrl: 'images/marker1.png',
		iconUrl : 'images/vls3001_PvZ_icon.ico',
		//shadowUrl: 'leaf-shadow.png',
		//iconSize:     [38, 95], // size of the icon
		//shadowSize:   [50, 64], // size of the shadow
		//iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
		//shadowAnchor: [4, 62],  // the same for the shadow
		popupAnchor : [ 10, -5 ]
	// point from which the popup should open relative to the iconAnchor
			});

	var mGymsInList = [];

	L
			.tileLayer(
					'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',
					{
						maxZoom : 18,
						attribution : 'Map data &copy; __tag_272$42_OpenStreetMap__tag_272$90_ contributors, ' + '__tag_273$13_CC-BY-SA__tag_273$78_, ' + 'Imagery Â© __tag_274$23_Mapbox__tag_274$57_',
						id : 'latibbean.lgg1j91f',
						accessToken : 'pk.eyJ1IjoibGF0aWJiZWFuIiwiYSI6IlgtVWVKWXcifQ.1pwTsR0qN4DqOZHciOUFdA'
					}).addTo(map);

	var markers = new L.FeatureGroup();

	var myData;
	$.getJSON("gyms.json", function(data) {
		//Do nothing here?
		}).done(function(data) {
		// data is a JavaScript object now. Handle it as such

			//console.log(mAddresses.length);

			function compareGymName(a, b) {
				if (a.Gym < b.Gym)
					return -1;
				if (a.Gym > b.Gym)
					return 1;
				return 0;
			}
			data.sort(compareGymName);
			myData = data;
			resetMap();

			//console.log("end");
		});

	function resetMap() {
		data = myData;
		$("#ListOfGyms").empty();
		mGymsInList = [];

		map.removeLayer(markers);
		markers.clearLayers();

		$.each(data, function(i, item) {
			if (item.Court == 'Beach') {
				if ($('#rdBeach').prop('checked') == true) {
					var lMarker = L.marker( [ item.latitude, item.longitude ],
							{
								icon : volleyBeachIcon
							})//.addTo(map)
							.bindPopup(
									"__tag_317$28_" + item.Gym
											+ "__tag_317$47_<br />"
											+ item.Address
											+ "__tag_317$76_<br />"
											+ item.Court
											+ "__tag_317$104_<br />"
											+ item.Info);
					markers.addLayer(lMarker);
					addGymToPage(item, i);
				}
			} else if (item.Court == 'Indoor') {
				if ($('#rdIndoor').prop('checked') == true) {
					var lMarker = L.marker( [ item.latitude, item.longitude ],
							{
								icon : volleyIcon
							})//.addTo(map)
							.bindPopup(
									"__tag_324$25_" + item.Gym
											+ "__tag_324$44_<br />"
											+ item.Address
											+ "__tag_324$73_<br />"
											+ item.Court
											+ "__tag_324$101_<br />"
											+ item.Info);
					markers.addLayer(lMarker);
					addGymToPage(item, i);
				}
			}
		});
		map.addLayer(markers);

		function addGymToPage(iGym, i) {
			if ($.inArray(iGym.Gym, mGymsInList) >= 0) {
				return;
			} else {
				mGymsInList.push(iGym.Gym);

				$("#ListOfGyms").append("__tag_338$39_");
				var $lGymLine = $("#ListOfGyms div").last();
				$lGymLine.attr("id", iGym.Gym + "_1").addClass("col-xs-12")
						.addClass("col-sm-12").addClass("col-md-12 col-lg-12");

				$lGymLine.append("__tag_343$32_")
				var $lGymPanel = $("#ListOfGyms div").last();
				//console.log($lGymPanel);
				$lGymPanel.attr("id", iGym.Gym + "_2").addClass("panel")
						.addClass("panel-default");
				$lGymPanel.bind("click", function() {
					//alert( "User clicked on: " + iGym.gym);
						// 	                init_map_adress(iGym.Address);

						map.setView(
								(new L.LatLng(iGym.latitude, iGym.longitude)),
								15);
						// 					map.panTo(new L.LatLng(iGym.latitude, iGym.longitude));
						// 					map.options.zoom = 2;
						// 					map.options.maxZoom = 2;
						//map.setView([iGym.latitude, iGym.longitude], 10);
					});

				$lGymPanel.append("__tag_358$33_");
				var $lGymPanelSub = $("#ListOfGyms div").last().attr("id",
						iGym.Gym + "_3").addClass("row").addClass("padall");

				$lGymPanelSub.append("__tag_361$36_");
				var $lGymPanelSub2 = $("#ListOfGyms div").last().attr("id",
						iGym.Gym + "_4").addClass("col-xs-12").addClass(
						"col-sm-12").addClass("col-md-12")
						.addClass("col-lg-12");

				$lGymPanelSub2.append("__tag_364$37_");
				var $lGymPanel21 = $("#ListOfGyms div").last().attr("id",
						iGym.Gym + "_5").addClass("clearfix").append(
						"__tag_365$118_");//.addClass("pull-left");

				// Adding Name
				$lGymPanel21.append("__tag_368$35_");
				$("#ListOfGyms div").last().addClass("icon").text(iGym.Gym);

				//Adding PostCode
				console.log(iGym);
				$lGymPanel21.append("__tag_372$35_");
				$("#ListOfGyms div").last().addClass("pull-right").text(iGym.PostCode);
</script>


<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery.swipebox/1.4.1/js/jquery.swipebox.min.js"></script>
<!--script src="js/jquery.swipebox.min.js"></scrip-->
<script type="text/javascript">
	jQuery(function($) {
		$(".swipebox").swipebox();
	});
</script>
<!-- Portfolio Ends Here -->

<!--script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mixitup/2.1.11/jquery.mixitup.min.js"></script-->
<script type="text/javascript" src="js/jquery.mixitup.min.js"></script>
<script type="text/javascript">
	$(function() {

		var filterList = {

			init : function() {

				// MixItUp plugin
			// http://mixitup.io
			$('#portfoliolist').mixitup( {
				targetSelector : '.portfolio',
				filterSelector : '.filter',
				effects : [ 'fade' ],
				easing : 'snap',
				// call the hover effect
				onMixEnd : filterList.hoverEffect()
			});

		},

		hoverEffect : function() {

			// Simple parallax effect
			$('#portfoliolist .portfolio').hover(function() {
				$(this).find('.label').stop().animate( {
					bottom : 0
				}, 200, 'easeOutQuad');
				$(this).find('img').stop().animate( {
					top : -30
				}, 500, 'easeOutQuad');
			}, function() {
				$(this).find('.label').stop().animate( {
					bottom : -40
				}, 200, 'easeInQuad');
				$(this).find('img').stop().animate( {
					top : 0
				}, 300, 'easeOutQuad');
			});

		}

		};

		// Run the show!
		filterList.init();

	});
</script>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/latibbean">latibbean</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
